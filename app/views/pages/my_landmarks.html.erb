<% content_for :title, "My Landmarks" %>
<h2> My Landmark Contributions:</h2>

<div class="row">
  <% @landmarks.each do |landmark| %>
    <div class="col-md-4 mb-4">
      <!-- Cards with equal height -->
      <div class="card d-flex flex-column h-100 landmark-card">
        <div class="card-body d-flex flex-column">
          <!-- Landmark Region -->
          <p>
            <span class="btn btn-outline-<%= region_color(landmark.region) %> btn-sm disabled">
              <%= landmark.region.name %>
            </span>
          </p>

          <!-- Landmark Name (Title) -->
          <h5 class="card-title">
            <%= content_tag :span, landmark.name, class: "text-decoration-none" %>
          </h5>

          <!-- Landmark Author and Date -->
          <p class="card-text text-muted custom-lead">
            <span>
              <%= landmark.user.username %> | 
              <i class="fa-regular fa-calendar ms-2"></i> 
              <%= landmark.created_at.in_time_zone('Central Time (US & Canada)').strftime("%B %d, %Y") %>
            </span>
          </p>

          <!-- Read More Button Positioned at the Bottom -->
          <div class="mt-auto">
            <%= link_to "Read More", landmark_path(landmark), class: "btn btn-light btn-sm" %>
          </div>
        </div>
      </div>
    </div>
  <% end %>
</div>

<% if @landmarks.empty? %>
  <p>You haven't posted any landmarks yet.</p>
<% end %>

<h2>My Favorite Landmarks:</h2>
<div class="row">
  <% @liked_landmarks.each do |landmark| %>
    <div class="col-md-4 mb-4">
      <!-- Cards with equal height -->
      <div class="card d-flex flex-column h-100 landmark-card">
        <div class="card-body d-flex flex-column">
          <div class="d-flex align-items-center">
            <!-- Region Button -->
            <span class="btn btn-outline-<%= region_color(landmark.region) %> btn-sm disabled">
              <%= landmark.region.name %>
            </span>
            
            <!-- Favorite/Unfavorite Button -->
            <% if @liked_landmarks.pluck(:id).include?(landmark.id) %>
              <%= button_to like_path(current_user.likes.find_by(likeable: landmark)), 
                            method: :delete, 
                            class: "btn btn-link p-0 text-danger ms-2" do %>
                <i class="fa-solid fa-heart"></i>
              <% end %>
            <% else %>
              <%= button_to likes_path, 
                            params: { like: { likeable_id: landmark.id, likeable_type: 'Landmark' } }, 
                            method: :post, 
                            class: "btn btn-link p-0 ms-2" do %>
                <i class="fa-regular fa-heart"></i>
              <% end %>
            <% end %>
          </div>

          <!-- Landmark Name (Title) -->
          <h5 class="card-title">
            <%= content_tag :span, landmark.name, class: "text-decoration-none" %>
          </h5>

          <!-- Landmark Author and Date -->
          <p class="card-text text-muted custom-lead">
            <span>
              <%= landmark.user.username %> | 
              <i class="fa-regular fa-calendar ms-2"></i> 
              <%= landmark.created_at.strftime("%B %d, %Y") %>
            </span>
          </p>

          <!-- Read More Button Positioned at the Bottom -->
          <div class="mt-auto">
            <%= link_to "Read More", landmark_path(landmark), class: "btn btn-light btn-sm" %>
          </div>
        </div>
      </div>
    </div>
  <% end %>
</div>

<% if @liked_landmarks.empty? %>
  <p>You haven't liked any landmarks yet.</p>
<% end %>
